(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){e.exports=a(39)},30:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(20),l=a.n(r),c=(a(30),a(41)),i=a(42),o=a(43);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=a(5),m=a.n(u),p=a(7),d=a(9),h=a(10),f=a(14),v=a(11),b=a(15),E=a(16),O=a.n(E),j=a(40),w=function(){return s.a.createElement("div",{className:"navbar-fixed"},s.a.createElement("nav",null,s.a.createElement("div",{className:"nav-wrapper purple accent-1"},s.a.createElement(j.a,{to:"/",className:"brand-logo"},"Poller"))))},y=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).handleChange=function(e){a.setState({isChecked:e.target.name})},a.handleSubmit=function(){var e=Object(p.a)(m.a.mark(function e(t){var n,s,r,l,c;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={_id:a.props.match.params.id,question:a.state.isChecked},e.next=4,fetch("/api/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:s=e.sent,console.log(s),200===s.status&&(r=a.state,l=r.isChecked,r.submitted,c=r.questions,a.setState({isComplete:!0,submitted:c[l].question}));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.renderQuestions=function(){var e=a.state.questions;return Object.values(e).map(function(e,t){var n=e.question;return s.a.createElement("p",{key:O()()},s.a.createElement("label",null,s.a.createElement("input",{name:"quest".concat(t),type:"radio",checked:a.state.isChecked==="quest".concat(t),onChange:a.handleChange}),s.a.createElement("span",null,n)))})},a.renderResults=function(){var e=a.state,t=e.questions,n=e.submitted;return Object.values(t).map(function(e,t){var a=e.question,r=e.count;return a===n&&(r+=1),s.a.createElement("li",{key:O()(),className:"thevotes"},s.a.createElement("span",null,a),s.a.createElement("span",{className:"votes"},r," Votes"))})},a.state={isChecked:"quest0",isComplete:!1,submitted:null,questions:null},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(m.a.mark(function e(){var t,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/getpoll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.props.match.params.id)});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,this.setState({questions:a});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return console.log(this.state),this.state.questions?this.state.isComplete?s.a.createElement("div",null,s.a.createElement(w,null),s.a.createElement("div",{className:"contained"},s.a.createElement("div",{className:"poll"},s.a.createElement("h4",null,"The results are in!"),s.a.createElement("div",{className:"actualpoll"},s.a.createElement("ul",null,this.renderResults()),s.a.createElement(j.a,{to:"/",className:"waves-effect waves-light btn pollbtn"},"Create new poll"))))):s.a.createElement("div",null,s.a.createElement(w,null),s.a.createElement("div",{className:"contained"},s.a.createElement("div",{className:"poll"},s.a.createElement("h4",null,"Poll"),s.a.createElement("div",{className:"actualpoll"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("ul",null,this.renderQuestions()),s.a.createElement("button",{type:"submit",className:"waves-effect waves-light btn pollbtn"},"Submit Answer")))))):null}}]),t}(n.Component),N=a(21),g=a(23),k=a(6),q=function(e){return e.id||e.history.push("/"),s.a.createElement("div",null,s.a.createElement(w,null),s.a.createElement("div",{className:"contained"},s.a.createElement("div",{className:"poll"},s.a.createElement("h4",null,"Poll Submitted"),s.a.createElement("div",{className:"actualpoll"},s.a.createElement("div",{className:"check"},s.a.createElement("i",{className:"fa fa-check"})),s.a.createElement(j.a,{to:"/poll-results/".concat(e.id),className:"waves-effect waves-light btn pollbtn"},"View Poll")))))},C=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(k.a)({},e.target.name,e.target.value))},a.renderInput=function(){return Object.keys(a.state).filter(function(e){return e.startsWith("quest")}).map(function(e,t){if(t<a.state.number)return s.a.createElement("div",{key:t,className:"row"},s.a.createElement("div",{className:"input-field col s12"},s.a.createElement("input",{value:a.state[e],id:"item".concat(t),type:"text",className:"validate",name:e,onChange:a.handleChange,placeholder:"Questions #".concat(t+1),autoComplete:"off"})))})},a.handleSubmit=function(){var e=Object(p.a)(m.a.mark(function e(t){var n,s,r,l;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=Object.keys(a.state).filter(function(e){return e.startsWith("quest")}),s=n.filter(function(e){if(a.state[e].length>0)return a.state[e]}).map(function(e){var t;return t={},Object(k.a)(t,e,a.state[e]),Object(k.a)(t,"count",0),t}).reduce(function(e,t,a){var n=Object.keys(t),s=Object(g.a)(n,2),r=s[0],l=s[1];return e[r]=Object(k.a)({question:t[r]},l,0),e},{}),e.next=5,fetch("/api/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 5:return r=e.sent,e.next=8,r.json();case 8:l=e.sent,a.setState({id:l,quest0:"",quest1:"",quest2:"",quest3:"",quest4:""},function(){a.props.history.push("/completed/".concat(l))});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={error:null,number:2,id:null},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){for(var e=this,t=function(t){var a="quest".concat(t);e.setState(function(e){return Object(N.a)({},e,Object(k.a)({},a,""))})},a=0;a<5;a++)t(a)}},{key:"componentDidUpdate",value:function(e,t){var a=this;!function(){var e=a.state.number,t="quest".concat(e-1);if(a.state[t]&&0!==a.state[t].length){for(var n=0,s=Object.keys(a.state).filter(function(e){return e.startsWith("quest")}),r=a.state,l=0;l<r.number;l++)r[s[l]]&&r[s[l]].length>0&&n++;n===a.state.number&&a.setState({number:a.state.number+1})}}()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(o.a,{path:"/completed/:id",render:function(t){return s.a.createElement(q,Object.assign({},t,{id:e.state.id}))}}),s.a.createElement(w,null),s.a.createElement("div",{className:"contained"},s.a.createElement("div",{className:"poll"},s.a.createElement("h4",null,"Create a poll"),s.a.createElement("div",{className:"actualpoll"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("ul",{className:"marginthis"},this.renderInput()),s.a.createElement("button",{className:"waves-effect waves-light btn pollbtn"},"Submit poll"))))))}}]),t}(n.Component);l.a.render(s.a.createElement(c.a,null,s.a.createElement(i.a,null,s.a.createElement(o.a,{path:"/poll-results/:id",component:y}),s.a.createElement(o.a,{path:"/",component:C}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[24,2,1]]]);
//# sourceMappingURL=main.053f335e.chunk.js.map